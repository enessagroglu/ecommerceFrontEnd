{"version":3,"file":"effect-expo.min.js","names":["window","SwiperElementRegisterParams","swiper","on","extendParams","expoEffect","imageScale","imageOffset","scale","rotate","grayscale","setSize","box","el","getBoundingClientRect","size","isHorizontal","height","width","params","style","setProperty","currentValue","getPropertyValue","currentValueNumber","parseInt","newValue","Math","round","Number","isNaN","abs","effect","setTranslate","setTransition","overwriteParams","perspective","recreateShadows","getEffectParams","requireUpdateOnVirtual","classNames","push","containerModifierClass","overwriteParamsResult","Object","assign","originalParams","_s","duration","slideShadows","slides","forEach","slideEl","querySelectorAll","shadowEl","remove","length","requestAnimationFrame","effectInit","rtlTranslate","rtl","spv","slidesPerView","translateOffset","max","minTranslateOffset","rtlMultiplier","i","contentWrapEl","querySelector","contentEl","imageEl","progress","progressLimited","min","transform","filter","sides","transformOrigin","opacity","transitionDuration","centeredSlides","slidesPerGroup","watchSlidesProgress"],"sources":["../demo-vite/effect-expo.esm.js","../node_modules/swiper/shared/effect-init.mjs"],"sourcesContent":["import { effectInit } from 'swiper/effect-utils';\n\nif (typeof window !== 'undefined' && window.SwiperElementRegisterParams) {\n  window.SwiperElementRegisterParams(['expoEffect']);\n}\n\nexport default function EffectExpo({ swiper, on, extendParams }) {\n  extendParams({\n    expoEffect: {\n      imageScale: 1.125,\n      imageOffset: 1.25,\n      scale: 1.25,\n      rotate: 0,\n      grayscale: true,\n    },\n  });\n\n  const setTranslate = () => {\n    const { slides, rtlTranslate: rtl } = swiper;\n    const spv = swiper.params.slidesPerView;\n    const isHorizontal = swiper.isHorizontal();\n    let translateOffset = 0.5;\n    const params = swiper.params.expoEffect;\n    const imageOffset = Math.max(1.25, params.imageOffset);\n    if (spv > 1.5) {\n      const minTranslateOffset = (imageOffset - 1) / 2 / imageOffset;\n      translateOffset = Math.max(minTranslateOffset, 0.5 - (spv - 1.5));\n    }\n    const imageScale = Math.max(1.125, params.imageScale);\n    const scale = Math.max(1.25, params.scale);\n    const rtlMultiplier = rtl ? -1 : 1;\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const slideEl = slides[i];\n      const contentWrapEl = slideEl.querySelector('.expo-container');\n      const contentEl = slideEl.querySelector('.expo-content');\n      const imageEl = slideEl.querySelector('.expo-image');\n      const progress = slideEl.progress;\n      const progressLimited = Math.max(Math.min(progress, 1), -1);\n\n      if (imageEl) {\n        imageEl.style.transform = `translate${isHorizontal ? 'X' : 'Y'}(${\n          progressLimited * translateOffset * 100 * rtlMultiplier\n        }%) scale(${1 + (imageScale - 1) * Math.abs(progressLimited)})`;\n        if (params.grayscale) {\n          imageEl.style.filter = `grayscale(${Math.abs(progressLimited)})`;\n        }\n      }\n      const sides = isHorizontal\n        ? rtl\n          ? ['right', 'left']\n          : ['left', 'right']\n        : ['top', 'bottom'];\n      if (Math.abs(progress) > 0.01) {\n        if (imageEl) {\n          imageEl.style.transformOrigin = progress > 0 ? sides[0] : sides[1];\n        }\n        if (contentWrapEl) {\n          contentWrapEl.style.transformOrigin =\n            progress > 0 ? sides[1] : sides[0];\n        }\n      }\n      if (contentWrapEl) {\n        contentWrapEl.style.transform = `scale(${\n          1 + (scale - 1) * Math.abs(progressLimited)\n        }) rotate${isHorizontal ? 'Y' : 'X'}(${\n          params.rotate *\n          progressLimited *\n          (isHorizontal ? 1 : -1) *\n          rtlMultiplier\n        }deg)`;\n      }\n      if (contentEl) {\n        contentEl.style.transform = `translate${isHorizontal ? 'X' : 'Y'}(${\n          progressLimited * 100 * rtlMultiplier\n        }%)`;\n        contentEl.style.opacity = 1 - Math.abs(progressLimited) * 2;\n      }\n    }\n  };\n\n  const setTransition = (duration) => {\n    const { slides } = swiper;\n    for (let i = 0; i < slides.length; i += 1) {\n      const slideEl = slides[i];\n      [\n        ...slideEl.querySelectorAll(\n          '.expo-container, .expo-image, .expo-content',\n        ),\n      ].forEach((el) => {\n        el.style.transitionDuration = `${duration}ms`;\n      });\n    }\n  };\n  const setSize = () => {\n    const box = swiper.el.getBoundingClientRect();\n    const size = swiper.isHorizontal() ? box.height : box.width;\n    const { rotate, scale, imageOffset } = swiper.params.expoEffect;\n    swiper.el.style.setProperty('--expo-image-offset', imageOffset);\n    const currentValue = swiper.el.style.getPropertyValue('--expo-padding');\n    const currentValueNumber = parseInt(currentValue, 10) || 0;\n\n    const activeSlideSize = size / scale;\n    let newValue = (size - activeSlideSize) / 2;\n    if (rotate) {\n      newValue = newValue * 1.35;\n    }\n    newValue = Math.round(newValue);\n\n    if (currentValue && !Number.isNaN(currentValueNumber)) {\n      if (Math.abs(newValue - currentValueNumber) < 5) return;\n    }\n\n    swiper.el.style.setProperty('--expo-padding', `${newValue}px`);\n  };\n\n  on('init', setSize);\n  on('resize', setSize);\n  on('update', setSize);\n\n  effectInit({\n    effect: 'expo',\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    perspective: () => true,\n    overwriteParams: () => ({\n      // resizeObserver: false,\n      centeredSlides: true,\n      slidesPerGroup: 1,\n      watchSlidesProgress: true,\n    }),\n  });\n}\n","function effectInit(params) {\n  const {\n    effect,\n    swiper,\n    on,\n    setTranslate,\n    setTransition,\n    overwriteParams,\n    perspective,\n    recreateShadows,\n    getEffectParams\n  } = params;\n  on('beforeInit', () => {\n    if (swiper.params.effect !== effect) return;\n    swiper.classNames.push(`${swiper.params.containerModifierClass}${effect}`);\n    if (perspective && perspective()) {\n      swiper.classNames.push(`${swiper.params.containerModifierClass}3d`);\n    }\n    const overwriteParamsResult = overwriteParams ? overwriteParams() : {};\n    Object.assign(swiper.params, overwriteParamsResult);\n    Object.assign(swiper.originalParams, overwriteParamsResult);\n  });\n  on('setTranslate', () => {\n    if (swiper.params.effect !== effect) return;\n    setTranslate();\n  });\n  on('setTransition', (_s, duration) => {\n    if (swiper.params.effect !== effect) return;\n    setTransition(duration);\n  });\n  on('transitionEnd', () => {\n    if (swiper.params.effect !== effect) return;\n    if (recreateShadows) {\n      if (!getEffectParams || !getEffectParams().slideShadows) return;\n      // remove shadows\n      swiper.slides.forEach(slideEl => {\n        slideEl.querySelectorAll('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').forEach(shadowEl => shadowEl.remove());\n      });\n      // create new one\n      recreateShadows();\n    }\n  });\n  let requireUpdateOnVirtual;\n  on('virtualUpdate', () => {\n    if (swiper.params.effect !== effect) return;\n    if (!swiper.slides.length) {\n      requireUpdateOnVirtual = true;\n    }\n    requestAnimationFrame(() => {\n      if (requireUpdateOnVirtual && swiper.slides && swiper.slides.length) {\n        setTranslate();\n        requireUpdateOnVirtual = false;\n      }\n    });\n  });\n}\n\nexport { effectInit as e };\n"],"mappings":"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"}